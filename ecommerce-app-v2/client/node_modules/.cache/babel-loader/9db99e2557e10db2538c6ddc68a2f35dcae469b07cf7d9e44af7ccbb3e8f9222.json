{"ast":null,"code":"import React,{useState}from'react';import{Container,Typography,Button,Grid}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';import SignUpForm from'./SignUpForm';import SignInForm from'./SignInForm';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({container:{marginTop:theme.spacing(4)},toggleButton:{marginTop:theme.spacing(2)}}));const AuthPage=_ref=>{let{setIsAuthenticated,setUser}=_ref;const classes=useStyles();const[isSignUp,setIsSignUp]=useState(false);const handleSignUp=async formData=>{try{const response=await fetch('/api/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error);}const data=await response.json();console.log(data.message);toast.success('Sign up successful. Please sign in.',{position:\"top-right\",autoClose:3000});setIsSignUp(false);}catch(error){console.error('Error signing up:',error);toast.error(error.message,{position:\"top-right\",autoClose:3000});}};const handleSignIn=async formData=>{try{const response=await fetch('/api/signin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error);}const data=await response.json();console.log(data.message);if(data.token&&data.user){localStorage.setItem('token',data.token);localStorage.setItem('user',JSON.stringify(data.user));setIsAuthenticated(true);setUser(data.user);window.location.href='/';}else{console.error('Unexpected server response format');toast.error('Unexpected server response format.',{position:\"top-right\",autoClose:3000});}}catch(error){console.error('Error signing in:',error);toast.error(error.message,{position:\"top-right\",autoClose:3000});}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",className:classes.container,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",align:\"center\",gutterBottom:true,children:isSignUp?'Sign Up':'Sign In'}),isSignUp?/*#__PURE__*/_jsx(SignUpForm,{onSignUp:handleSignUp}):/*#__PURE__*/_jsx(SignInForm,{onSignIn:handleSignIn}),/*#__PURE__*/_jsx(Grid,{container:true,justify:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"text\",className:classes.toggleButton,onClick:()=>setIsSignUp(!isSignUp),children:isSignUp?'Already have an account? Sign In':'Create an account'})})]});};export default AuthPage;","map":{"version":3,"names":["React","useState","Container","Typography","Button","Grid","makeStyles","SignUpForm","SignInForm","toast","jsx","_jsx","jsxs","_jsxs","useStyles","theme","container","marginTop","spacing","toggleButton","AuthPage","_ref","setIsAuthenticated","setUser","classes","isSignUp","setIsSignUp","handleSignUp","formData","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","error","data","console","log","message","success","position","autoClose","handleSignIn","token","user","localStorage","setItem","window","location","href","maxWidth","className","children","variant","align","gutterBottom","onSignUp","onSignIn","justify","onClick"],"sources":["/app/client/src/pages/AuthPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Container, Typography, Button, Grid } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SignUpForm from './SignUpForm';\nimport SignInForm from './SignInForm';\nimport { toast } from 'react-toastify';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    marginTop: theme.spacing(4),\n  },\n  toggleButton: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst AuthPage = ({ setIsAuthenticated, setUser }) => {\n  const classes = useStyles();\n  const [isSignUp, setIsSignUp] = useState(false);\n\n  const handleSignUp = async (formData) => {\n    try {\n      const response = await fetch('/api/signup', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error);\n      }\n      const data = await response.json();\n      console.log(data.message);\n      toast.success('Sign up successful. Please sign in.', {\n        position: \"top-right\",\n        autoClose: 3000,\n      });\n      setIsSignUp(false);\n    } catch (error) {\n      console.error('Error signing up:', error);\n      toast.error(error.message, {\n        position: \"top-right\",\n        autoClose: 3000,\n      });\n    }\n  };\n\n  const handleSignIn = async (formData) => {\n    try {\n      const response = await fetch('/api/signin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error);\n      }\n      const data = await response.json();\n      console.log(data.message);\n      if (data.token && data.user) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify(data.user));\n        setIsAuthenticated(true);\n        setUser(data.user);\n        window.location.href = '/';\n      } else {\n        console.error('Unexpected server response format');\n        toast.error('Unexpected server response format.', {\n          position: \"top-right\",\n          autoClose: 3000,\n        });\n      }\n    } catch (error) {\n      console.error('Error signing in:', error);\n      toast.error(error.message, {\n        position: \"top-right\",\n        autoClose: 3000,\n      });\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\" className={classes.container}>\n      <Typography variant=\"h4\" align=\"center\" gutterBottom>\n        {isSignUp ? 'Sign Up' : 'Sign In'}\n      </Typography>\n      {isSignUp ? (\n        <SignUpForm onSignUp={handleSignUp} />\n      ) : (\n        <SignInForm onSignIn={handleSignIn} />\n      )}\n      <Grid container justify=\"center\">\n        <Button variant=\"text\" className={classes.toggleButton} onClick={() => setIsSignUp(!isSignUp)}>\n          {isSignUp ? 'Already have an account? Sign In' : 'Create an account'}\n        </Button>\n      </Grid>\n    </Container>\n  );\n};\n\nexport default AuthPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}